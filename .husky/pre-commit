#!/bin/sh
set -e  # Exit on first error

echo ""
echo "========================================"
echo "  PRE-COMMIT CHECKS"
echo "========================================"
echo ""

# Step 1: TypeScript typecheck
echo ">>> [1/2] Running TypeScript typecheck..."
echo ""
npm run typecheck 2>&1 || {
  echo ""
  echo "❌ ERROR: Typecheck failed!"
  echo "   Fix TypeScript errors before committing."
  echo ""
  exit 1
}
echo ""
echo "✓ Typecheck passed"
echo ""

# Step 2: ESLint
echo ">>> [2/2] Running ESLint..."
echo ""
npm run lint 2>&1 || {
  echo ""
  echo "❌ ERROR: Lint failed!"
  echo "   Fix linting errors before committing."
  echo ""
  exit 1
}
echo ""
echo "✓ Lint passed"
echo ""

echo "========================================"
echo "  ✓ ALL CHECKS PASSED - COMMITTING..."
echo "========================================"
echo ""
